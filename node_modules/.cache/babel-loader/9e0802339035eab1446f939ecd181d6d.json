{"ast":null,"code":"import _slicedToArray from\"C:/Users/samee/OneDrive/Desktop/feedback-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import Card from'./UI/Card';import Button from'./UI/Button';import'./FeedbackForm.css';import{useState}from'react';import RatingSelect from'./RatingSelect';import FeedbackContext from'../store/FeedbackContext';import{useContext}from'react';import FeedBackItem from'./FeedBackItem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FeedbackForm=function FeedbackForm(_ref){var onSubmitHandler=_ref.onSubmitHandler;var _useContext=useContext(FeedbackContext),addItemHandler=_useContext.addItemHandler,feedbackEdit=_useContext.feedbackEdit,updateFeedbackItem=_useContext.updateFeedbackItem;// feedbackEdit contains item and edit as in an object\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),btnDisabled=_useState4[0],setButtonDisabled=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];//for editing the item. The form gets loaded everytime we click on submit after editing\nuseEffect(function(){if(feedbackEdit.edit===true){setButtonDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);// when the input is changed\nvar inputChangeHandler=function inputChangeHandler(_ref2){var value=_ref2.target.value;console.log(value);if(value===''){setButtonDisabled(true);setMessage(null);}else if(/\\d/.test(value)){//check if numbers in input\nsetMessage('Text must not include numbers!');setButtonDisabled(true);}else if(value.trim().length<10){// text < 10 characters\nsetMessage('Text must be at least 10 characters long!');setButtonDisabled(true);}else{setMessage(null);setButtonDisabled(false);}setText(value);};// select the rating\nvar selectHandler=function selectHandler(rating){console.log(rating);setRating(rating);};// submitting the form\nvar submitHandler=function submitHandler(e){e.preventDefault();var newFeedback={text:text,rating:rating,id:Math.random().toString()};//     onSubmitHandler(newFeedback);\n// logic for updating. If editing the item then edit it otherwise add a new item\nif(feedbackEdit.edit===true){updateFeedbackItem(feedbackEdit.item.id,newFeedback);}else{addItemHandler(newFeedback);}// addItemHandler(newFeedback);\nsetText('');};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"feedback-form\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"How would you rate your service with us ? \"}),/*#__PURE__*/_jsx(\"div\",{className:\"ratingSelect\",children:/*#__PURE__*/_jsx(RatingSelect,{onSelect:selectHandler})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Write a review\",onChange:inputChangeHandler,value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message})]})});};export default FeedbackForm;","map":{"version":3,"sources":["C:/Users/samee/OneDrive/Desktop/feedback-react/src/components/FeedbackForm.js"],"names":["React","useEffect","Card","Button","useState","RatingSelect","FeedbackContext","useContext","FeedBackItem","FeedbackForm","onSubmitHandler","addItemHandler","feedbackEdit","updateFeedbackItem","text","setText","btnDisabled","setButtonDisabled","message","setMessage","rating","setRating","edit","item","inputChangeHandler","value","target","console","log","test","trim","length","selectHandler","submitHandler","e","preventDefault","newFeedback","id","Math","random","toString"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport Card from './UI/Card';\r\nimport Button from './UI/Button';\r\nimport './FeedbackForm.css';\r\nimport { useState } from 'react';\r\nimport RatingSelect from './RatingSelect';\r\nimport FeedbackContext from '../store/FeedbackContext';\r\nimport { useContext } from 'react';\r\nimport FeedBackItem from './FeedBackItem';\r\n\r\nconst FeedbackForm = ({onSubmitHandler}) => {\r\n    const {addItemHandler , feedbackEdit , updateFeedbackItem} = useContext(FeedbackContext);// feedbackEdit contains item and edit as in an object\r\n\r\n    const [text , setText] = useState('');\r\n    const [ btnDisabled , setButtonDisabled] = useState(true);\r\n    const [ message , setMessage] = useState('');\r\n    const [rating , setRating] = useState('');\r\n\r\n\r\n\r\n\r\n      //for editing the item. The form gets loaded everytime we click on submit after editing\r\n      useEffect(() => {\r\n        if(feedbackEdit.edit === true) {\r\n            setButtonDisabled(false);\r\n            setText(feedbackEdit.item.text);\r\n            setRating(feedbackEdit.item.rating);\r\n            \r\n        }\r\n        \r\n              } , [feedbackEdit])\r\n            \r\n\r\n// when the input is changed\r\n\r\n    const inputChangeHandler = ({target : {value}}) => {\r\nconsole.log(value);\r\nif(value === '') {\r\n    setButtonDisabled(true);\r\n    setMessage(null);\r\n}else if (/\\d/.test(value)) { //check if numbers in input\r\nsetMessage('Text must not include numbers!');\r\nsetButtonDisabled(true);\r\n}else if(value.trim().length < 10) { // text < 10 characters\r\nsetMessage('Text must be at least 10 characters long!');\r\nsetButtonDisabled(true);\r\n}else {\r\n    setMessage(null);\r\n    setButtonDisabled(false);\r\n}\r\nsetText(value);    \r\n    }\r\n\r\n    // select the rating\r\n    const selectHandler = (rating) => {\r\n        console.log(rating);\r\nsetRating(rating);\r\n    }\r\n\r\n    // submitting the form\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const newFeedback = {\r\n        text,\r\n        rating,\r\n        id: Math.random().toString()\r\n        }\r\n    //     onSubmitHandler(newFeedback);\r\n  \r\n// logic for updating. If editing the item then edit it otherwise add a new item\r\n\r\nif(feedbackEdit.edit === true) {\r\nupdateFeedbackItem(feedbackEdit.item.id , newFeedback);\r\n}else {\r\n    addItemHandler(newFeedback);\r\n}\r\n    // addItemHandler(newFeedback);\r\n     setText('');\r\n    }\r\n\r\n\r\n  return <Card>\r\n      <form className='feedback-form' onSubmit = {submitHandler}>\r\n      <h3>How would you rate your service with us ? </h3>\r\n      <div className='ratingSelect'>\r\n      <RatingSelect onSelect = {selectHandler}  />\r\n      </div>\r\n    \r\n      <div className='input-group'>\r\n          <input type=\"text\" placeholder = \"Write a review\" onChange = {inputChangeHandler} value={text} />\r\n<Button type = \"submit\" isDisabled={btnDisabled} >Send</Button>      \r\n{/* {feedbackEdit.edit ? <Button type = \"submit\" isDisabled={btnDisabled} >Update</Button> :\r\n<Button type = \"submit\" isDisabled={btnDisabled} >Send</Button>  \r\n}      */}\r\n   \r\n\r\n      </div>\r\n      {message && <p className='message'>{message}</p>}\r\n      </form>\r\n   \r\n\r\n  </Card>;\r\n};\r\n\r\nexport default FeedbackForm;\r\n"]},"metadata":{},"sourceType":"module"}